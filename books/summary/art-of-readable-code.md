# 읽기 좋은 코드가 좋은 코드다 (원제 The Art of Readable Code), 더스틴보즈웰, 트레버파우커 저

추천하고 싶은 책이다. 예전부터 **Clean Code**에 관심이 많았기 때문에 관련 된 책을 몇 권 읽기도 했었고, 프로그래밍과 관련된 대부분의 책에서는 좋은 코드에 대해 꼭 언급한다. 코드 작성에 대해 가장 자세한 조언을 해준 책은 ***Code Complete2, 스티브맥코넬 저 (현재 절판)*** 이었긴 하지만, 책이 너무 두껍고 번역도 아쉬운 부분이 있다.<br>

(Code Complete 사진 포함)

그에 비해 이 책은 좋은 코드에 관한 거의 모든 내용을 담고 있으면서도 쉽다. 게다가 얇다!

## 쉬운 코드
> 코드는 다른 사람이 그것을 이해하는 데 들이는 시간을 최소화 하는 방식으로 작성되어야 한다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 23페이지

신규개발이라면 아마 업무 프로세스를 먼저 이해해야 할 것이고, 레거시 코드를 개선해야 한다면 남이 작성한 (또는 내가 작성한) 코드를 먼저 이해 해야 할 것이다. 후자의 경우, 쉽게 작성 된 코드는 이 시간을 단축 시켜 주고, 코드를 완전히 이해할 수 있게 돕는다. 코드를 완전히 이해한다는 것은 코드를 자유롭게 수정하고, 디버깅할 수 있다는 의미이기도 하다.<br><br>

> 가장 읽기 쉬운 코드는 아무 것도 없는 코드다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 192페이지

뭔가 멋지거나 대단한 기능을 구현하려고 하는 것 보다, 프로젝트에 정말 필요한 기능인지 요구 사항을 잘 분석해서 적은 코드로 구현하는 것이 좋다. 쓸 데 없는 기능이 많아진다는 것은 쓸 데 없는 코드가 많아진다는 것이다.


## 변수명
> 변수의 이름은 작은 설명문이다. 충분한 공간은 아니지만, 이름 안에 끼워 넣은 추가 정보는 변수가 눈에 보일 때마다 전달된다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 40페이지

책에서 가장 먼저 언급하는 것은 **변수명**에 관한 것이다. 변수, 함수, 혹은 클래스 등의 이름은 변수의 값을 설명하는 구체적인 정보가 포함되어야 한다. 본인이 지은 이름을 "다른 사람은 다른 의미로 해석할 수 있을까?" 라는 질문을 던져보며 고민해야 한다.<br><br>

```
public String get() {
	//...
}

pubic void stop() {
	//...
}
```
위는 안 좋은 메소드명의 예이다. 어디서 뭘 가져온다는(get)것 인지 메소드명만으로는 전혀 유추가 불가능하다. 만약 인터넷에서 페이지를 가져오는 메소드라면 fetchPage() 또는 downloadPage() 등의 이름이 더 적절하다.<br>

```
for (int i=0; i<size; i++) {
	for(int j=0; j<i; j++) {
		//...
	}
}
```
특히, 루프안에서 사용하는 인덱스 변수는 간단히 작성하는 경우가 많다. 가능하면 의미를 담는 것이 좋다. 중첩 된 반복문의 경우 (애초에 복잡도를 안 높이는 것이 중요하지만!) 굉장히 도움이 된다.

## 일관성
얼마 전 자주 가는 개발 관련 커뮤니티에서 재밌는 글을 봤다.<br>

```
// 보기 (1)
if(true) {
	//...
}

// 보기 (2)
if(true)
{
	//...
}
```
위 두 가지 스타일 중 어떤 스타일을 선호하냐는 글이 있었는데 댓글에 의견이 분분했다. 사실 정답은 없다고 생각한다. 각 언어 마다 전통적으로 권장 되는 스타일이 있고, 또 본인이 현재 속한 팀 안의 코드 컨벤션이 있을 것이고 말 그대로 Case by Case 이다. 중요한 것은 **일관성** 이다. 코드를 작성할 때 각종 스타일 (줄바꿈, 정렬 등)은 전체에 일관성 있게 유지하는 것이 중요하다.

> 일관성 있는 스타일은 '올바른' 스타일보다 더 중요하다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 73페이지


## 주석
> 주석의 목적은 코드를 읽는 사람이 코드를 작성한 사람만큼 코드를 잘 이해하게 돕는 데  있다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 76페이지

주석을 다는 것보다 코드 스스로 설명하도록 하는 것이 좋다. 스스로 설명한다는 것은 변수나 메소드에 좋은 이름을 사용하는 것이다. 좋은 이름은 좋은 주석보다 더 낫다.<br>
메소드를 설명할 때는 수행하는 동작을 설명하지 말고 의도를 명시하는 것이 좋다. 언어 자체가 야기하는 혼란을 제거하고 설명을 더 명확하고 자세하게 한다.

```
// (1) 단순히 수행하는 동작을 설명
// 리스트를  반복한다
for(String product Info : productList) {
	//...
}

// (2) 의도를 명시
// 각 가격을 낮은 값에서 높은 값으로 하나씩 꺼내온다.
for(String product Info : productList) {
	//...
}
```
> 코드는 지속적으로 진화하며, 그러는 과정 중에 버그를 갖게 될 수 밖에 없다. 이러한 결함을 설명하는 것을 부끄러워 할 필요는 없다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 81페이지

이 부분은 맘에 들었던 부분인데, 주석을 통해 코드에 있는 결함을 설명하라고 한다. 그리고 내가 현재 사용하고 있는 IntellliJ나 최신 IDE 에서 TODO로 주석을 작성 하면 별도의 메뉴에서 TODO 리스트들을 확인 할 수 있기 때문에, 언제든지 리스트를 빠르게 체크할 수 있다. 가능하면 최선의 코드를 짜는 것이 좋지만 어떠한 이유로 결점이나 부족한 점이 있는 코드를 짰을 때, 이렇게 주석으로 남겨 두면 나중에 나 뿐만 아니라 다른 사람이 내 코드를 볼 때도 많은 도움이 될 것이다.

```
// TODO: OOO점이 개선되어야 함.
public void EnforceLimmitsFromRequest(Request request, Reply reply) {
	//...
}
```

## 읽기 쉬운 흐름 제어
- 아래 소스와 같이 부정의 조건이 먼저 등장하는 것보다 긍정이 먼저 등장하는 것이 좋다. 부정이 아닌 긍정을 다루는 것이 좋다. 

```
// 부정보다는 긍정이 먼저 등장하는 것이 좋다.
if(!url.hasQueryParameter) {
	//...
} else {
	//...
}
```

- 줄 수를 최소화 하는 일보다 다른 사람이 코드를 읽고 이해하는 데 걸리는 시간을 최소화하는 일이 더 중요하다.

```
// 삼항 연산자를 이용하면 코드를 한 줄에 나타낼 수 있다.
// 하지만 한 줄에 쓰기 그 이상도 그 이하도 아니다.
return exponent >= 0 ? mantissa * (1 << exponent) : mantissa / 1

// 코드 줄 수는 늘어났지만 읽기가  훨씬 좋다.
if (exponent >= 0) {
	//...
} else {
	//...
}

```

- 조건문에서 인수의 순서는 왼쪽에 더 유동적인 '질문을 받는 표현'을, 오른쪽에 더 고정적인 값 즉, 비교 대상으로 사용되는 표현을 쓴다.

```
if (10 <= length) {}
while (bytes_expected > bytes_received) {}

// 위보다 아래가 읽기 쉽다.

if (length >= 10) {}
while (bytes_received < bytes_expected) {}
```

## 이미 있는 코드를 읽어라
> 프로그래머는 이미 존재하는 라이브러리로 문제를 풀 수 있는 상황이 많다는 걸 모르고 있다. 아니면 라이브러리가 할 수 있는 일을 잊어버린다.
> 
> 더스틴보즈웰, 트레버파우커 저. 읽기 좋은 코드가 좋은 코드다. 임백준 역. 한빛미디어. 2012. 196페이지

내가 처음 수행했던 프로젝트에서도 선임 개발자가 정의한 프레임워크에 유용한 라이브러리들이 꽤 많이 포함 되어 있었다. 근데 그게 있는 줄을 모르고 그 기능들을 구현하기 위해 많은 시간을 허비한 경험이 있다. 꼭 새롭게 구현하는 것만 중요한 것이 아니라 필요할 때 어떤 걸 가져다 써야 하는지 아는 것도 중요하다.